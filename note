 var geoJSON = {
        type:'FeatureCollection',
        features: []
    };

    //Pushing bus data to the geoJSON
    for (var index in options){
        bus = options[index].attributes
        lngLat = [bus.longitude, bus.latitude];
        let allMarker = [];
        allMarker.push(lngLat);

        _feature = {
            "type": 'Feature',
            "geometry": {
              "type": 'Point',
              "coordinates": lngLat,
            },
            "properties": {
              "title": bus.label,
              "description": " // Current Stop: "+bus.current_stop_sequence+" // Occupancy: "+bus.occupancy_status
            }
          }
          geoJSON.features.push(_feature);

        }





//API token
mapboxgl.accessToken = 'pk.eyJ1IjoiZ3JlYW4iLCJhIjoiY2wyemR4aHd0MWUycjNjcGZkdGR6MDcxdiJ9.xxcZhJA4uVkMJE9Jxw1LoQ'

//Creating default map using mapbox
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://style/mapbox/streets-v11',
    //Starting LngLat
    center: [-71.060081, 42.364554],
    zoom: 11
});
//Creating marker before the run function
//(Uncaught promise error when put inside the run function)

//Fetching API to add values to dropdown available buses
const select = document.getElementById("select")
const displayOption = async () => {
    const options = await getBusLocations();
        //Creates option tags under the select tag for every bus
        for (var bus in options) {
            const newOptions = document.createElement("option");
            //console.log(options[bus].id);
            newOptions.text = options[bus].id;
            newOptions.value = options[bus].id;
            select.appendChild(newOptions);
        };
};  displayOption();

//Function to move the marker
async function run(){

    const options = await getBusLocations();

    //Currently selected bus from the dropdown
    var selectedBus = document.getElementById("select");
    var value = selectedBus.value;

    /*********************************************************
    This code can be used to get 'text' instead of the value
    var text = selectedBus.options[selectedBus.selectedIndex].text;
    **********************************************************/

    //Selected dropdown value is saved as 'selected'
    var selected = options.find(bus => bus.id == value)

    //Sets the LngLat value for currently selected bus
    //newMarker.push(selected.attributes.longitude, selected.attributes.latitude);
    //marker.setLngLat(newMarker);  
    var marker = new mapboxgl.Marker({
        color: "green",
    })  .setLngLat([selected.attributes.longitude, selected.attributes.latitude])
        .addTo(map);

    //Printing date and the newMarker to console tap
    console.log(new Date());

    //Updates the marker every 10sec
    setTimeout(run, 10000);
};

const showAll = async () => {
    var marked = []
    var options = await getBusLocations();
    var check = document.getElementById("btn")
    var allMarker = [];
    var geoJSON = {
        type:'FeatureCollection',
        features: []
    };
            for (var index in options){
            bus = options[index].attributes
            lngLat = [bus.longitude, bus.latitude];
            allMarker.push(lngLat);
    
            _feature = {
                "type": 'Feature',
                "geometry": {
                  "type": 'Point',
                  "coordinates": lngLat,
                },
                "properties": {
                  "title": bus.label,
                  "description": " // Current Stop: "+bus.current_stop_sequence+" // Occupancy: "+bus.occupancy_status
                }
              }
              if (check.value=="on") {
                check.value="off"
                geoJSON.features.push(_feature);
                geoJSON.features.forEach((marker) => {
                    marked.push = new mapboxgl.Marker({
                        color: "green",
                    })  .setLngLat(marker.geometry.coordinates)
                        .addTo(map);
                });
            } else if (check.value=="off") {
                marked.remove();
            } check.value="on"
            };

    const onOff = () => {
            console.log(geoJSON.features)
            
                
            }
        
    }

// Request bus data from MBTA
async function getBusLocations(){
    //url containing buses info
    const url = 'https://api-v3.mbta.com/vehicles';
    //Waits for the url to finish and fetches it to response
    const response = await fetch(url);
    //saves response to .json file
    const json     = await response.json();
return json.data;
};








<!-- HTML !-->
<button class="button-68" role="button">Button 68</button>

/* CSS */
.button-68 {
  appearance: none;
  backface-visibility: hidden;
  background-color: #27ae60;
  border-radius: 8px;
  border-style: none;
  box-shadow: rgba(39, 174, 96, .15) 0 4px 9px;
  box-sizing: border-box;
  color: #fff;
  cursor: pointer;
  display: inline-block;
  font-family: Inter,-apple-system,system-ui,"Segoe UI",Helvetica,Arial,sans-serif;
  font-size: 16px;
  font-weight: 600;
  letter-spacing: normal;
  line-height: 1.5;
  outline: none;
  overflow: hidden;
  padding: 13px 20px;
  position: relative;
  text-align: center;
  text-decoration: none;
  transform: translate3d(0, 0, 0);
  transition: all .3s;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  vertical-align: top;
  white-space: nowrap;
}

.button-68:hover {
  background-color: #1e8449;
  opacity: 1;
  transform: translateY(0);
  transition-duration: .35s;
}

.button-68:active {
  transform: translateY(2px);
  transition-duration: .35s;
}

.button-68:hover {
  box-shadow: rgba(39, 174, 96, .2) 0 6px 12px;
}